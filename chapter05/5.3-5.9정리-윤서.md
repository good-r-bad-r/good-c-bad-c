## 5.3 코드 줄 수를 고정하지 말라

- 일반적으로 코드베이스의 코드 줄 수는 적을수록 좋다.
- 코드의 줄이 많다는 것은 코드가 지나치게 복잡하거나, 기존 코드를 재사용하지 않고 있다는 신호일 수 있다.
- 개발자의 인지 부하가 증가할 수 있다.
- 코드 줄 수 보다 우리가 신경쓰는 것은 다음과 같은 사항이다.
  - 이해하기 쉽다.
  - 오해하기 어렵다.
  - 실수로 작동이 안 되게 만들기가 어렵다.
- 매우 이해하기 어려운 코드 한 줄은 같은 일을 하는 이해하기 쉬운 코드 10줄에 비해 코드 품질을 쉽게 낮출 수 있다.



### 5.3.1 간결하지만 이해하기 어려운 코드는 피해라

```java
Boolean isIdValid(UInt16 id) {
  return countSetBits(id & 0x7FFF) % 2 == ((id & 0x8000) >> 15);
}
```

- 여러 개발자는 이 코드가 무엇을 하는지 이해하려고 많은 시간을 낭비할 가능성이 크다.
- 또한, 이 코드가 전제하고 있는 명확하지 않고 문서화되지 않은 많은 가정으로 인해 코드 수정에 상당히 취약하고, 수정된 코드가 제대로 동작하지 않기가 쉽다.



### 5.3.2 해결책: 더 많은 줄이 필요하더라도 가독성 높은 코드를 작성하라

- 추가되는 코드의 줄 수를 주시하는 것이 일반적으론 바람직하다.
- 그러나 이것보다 더 중요한 것은 코드가 이해하기 쉬워야 하고, 어떤 상황에서도 잘 동작하며, 문제가 되는 동작을 할 가능성은 없는지 확인하는 것이다.



## 5.4 일관된 코딩 스타일을 고수하라

- 서비스형 소프트웨어의 가장 친숙한 약자는 SaaS이다. 하지만 약자를 SAAS라고 쓴다면, 그 글을 읽는 다른 사람들은 서비스형 소프트웨어가 아닌 다른 어떤 것을 언급하고 있는지 궁금해할 것이다.



### 5.4.1 일관적이지 않은 코딩 스타일은 혼동을 일으킬 수 있다

- 이 명명 규칙을 따르지 않음으로써 connectionManager 클래스를 사용할 때 인스턴스 변수라고 오해하기 쉽고, 이로 인해 눈에 띄지 않는 심각한 버그를 초래할 수 있다.



### 5.4.2 해결책: 스타일 가이드를 채택하고 따르라

- 팀이 요구하는 스타일 가이드를 읽고 파악한 후에 그대로 따르면 된다.
- 구글은 여러 언어에 대한 스타일 가이드를 제시하고 있다.
- 팀이나 조직 전체가 같은 코딩 스타일을 따르면, 그것은 마치 모두가 같은 언어를 유창하게 말하는 것과 비슷하다.
- 린터와 같이 스타일 가이드를 따르지 않은 코드를 찾아 알려주는 도구도 있다.



## 5.5 깊이 중첩된 코드를 피하라

### 5.5.1 깊이 중첩된 코드는 읽기 어려울 수 있다

- 우선 눈으로 따라가기 어렵고, 특정 값이 반환되는 시점을 파악하기 위해 밀집된 모든 if-else 논리를 탐색해야 하기 때문이다.



### 5.5.2 해결책: 중첩을 최소화하기 위한 구조 변경

- 중첩된 블록에 반환문이 없다면, 그것은 함수가 너무 많은 일을 하고 있다는 신호다.



### 5.5.3 중첩은 너무 많은 일을 한 결과물이다



### 5.5.4 해결책: 더 작은 함수로 분리

- 많은 일을 하는 코드에 중첩 마저 많을 때, 이 함수를 쪼개는 것은 두 배로 중요해진다.



## 5.6 함수 호출도 가독성이 있어야 한다

- 함수 호출은 인수의 개수가 늘어나면 이햏가ㅣ 힘들어진다.
- 추상화 계층을 적절하게 정의하지 않았거나 코드가 충분히 모듈화되지 않았음을 의미할 수 있다.



### 5.6.1 매개변수는 이해하기 어려울 수 있다



### 5.6.2 해결책: 명명된 매개변수 사용

- 명명된 인수를 사용한다면, 함수 정의를 확인하지 않고도 `sendMessage()` 함수에 대한 호출은 쉽게 이해할 수 있다.
- 명명된 매개변수인 것 처럼 만들 수 있는 방법이 있다. 객체 구조 분해(object destructuring)를 사용하는 타입스크립트 등에서 흔히 볼 수 있다.



### 5.6.3 해결책: 서술적 유형 사용

- 사용하는 프로그래밍 언어의 명명된 매개변수 지원 여부와 상관없이 함수를 정의할 때 좀 더 서술적인 유형을 사용하는 것이 바람직하다.
- 정수와 불리언은 상황에 따라 어떤 종류의 값이라도 의미할 수 있기 때문에 그 자체로는 서술적이지 않다.



### 5.6.4 때로는 훌륭한 해결책이 없다

- 최신 내용으로 바뀌지 않은 주석문은 주석문이 아예 없는 것보다 더 나쁘다.
- setter 함수나 빌더 패턴이 대안이 될 수 있지만, 두 방법 모두 값이 누락된 채 인스턴스가 만들어질 수 있기 때문에 코드가 쉽게 오용될 수 있는 단점이 있다.
- 코드가 올바른지 확인하기 위해 (컴파일 타임 확인 대신) 런타임 확인을 통해 이런 오용을 방지해야 할 것이다.



### 5.6.5 IDE는 어떤가?

- 코드를 편집할 때 이 방법이 대단히 유용하지만 코드의 가독성을 위해 이 기능에 의존하지 않는 것이 좋다.



## 5.7 설명되지 않은 값을 사용하지 말라



### 5.7.1 설명되지 않은 값은 혼란스러울 수 있다

- 코드에 설명되지 않은 값이 있으면 혼란을 초래하고 이로 인해 버그가 발생할 수 있다. 그 값이 무엇을 의미하는지를 다른 개발자들에게 명확하게 해주는 것이 중요하다.



### 5.7.2 해결책: 잘 명명된 상수를 사용하라

- 값을 설명하기 위해 할 수 있는 한 가지 간단한 방법은 상수를 정의하고 상수 이름을 통해 값을 설명하는 것이다



### 5.7.3 해결책: 잘 명명된 함수를 사용하라

- 잘 명명된 상수를 사용하는 것의 대안으로 함수를 사용할 수 있다.
  - 상수를 반환하는 공급자 함수
  - 변환을 수행하는 헬퍼 함수
- 헬퍼 함수
  - 수량의 변환을 하위 문제로 만들어 이 기능을 전문적으로 수행하는 함수를 작성하는 것이다.
  - 수량 변환 시 사용되는 계수가 있다는 사실은 함수를 호출하는 쪽에서 몰라도 되는 구현 세부 사항이다.
- 마지막으로 여러분이 정의한 값이나 헬퍼 함수를 다른 개발자들이 재사용할 것인지 고려해볼 만한 가치가 있다. 그럴 가능성이 있다면 현재 사용중인 클래스보다는 별도의 유틸리티 클래스에 두는 것이 좋다.



## 5.8 익명 함수를 적절하게 사용하라

- 간단하고 자명한 것에 익명함수를 사용하면 코드의 가독성을 높여주지만, 복잡하거나 자명하지 않은 것 혹은 재사용해야 하는 것에 사용하면 문제가 될 수 있다.



### 5.8.1 익명 함수는 간단한 로직에 좋다

- 명명 함수를 정의하려면 반복적으로 사용하는 코드가 많이 필요하며 개발자에 따라 이런 함수는 가독성이 떨어진다고 생각할 수 있다.
- 누군가 다른데서도 기능이 필요하다면 익명 함수 보다는 명명 함수를 작성하는 것이 더 나을 수 있다.



### 5.8.2 익명 함수는 가독성이 떨어질 수 있다

- 익명 함수는 정의상 이름이 없기 때문에 그 익명 함수 코드를 읽는 사람에게 어떠한 것도 제공하지 않는다.
- 그것이 얼마나 간단한 것이든 간에 익명 함수의 내용이 자명하지 않다면 코드의 가독성은 떨어지기 마련이다.



### 5.8.3 해결책: 대신 명명 함수를 사용하라

- 간단하고 자명한 논리는 익명 함수를 써도 일반적으로 괜찮지만, 복잡한 논리는 명명 함수를 쓰는 것이 이점이 더 많다.



### 5.8.4 익명 함수가 길면 문제가 될 수 있다

- 함수 스타일을 채택한다고 해서 반드시 인라인 익명 함수를 사용해야 하는 것은 아니다.



### 5.8.5 해결책: 긴 익명 함수를 여러 개의 명명 함수로 나누라

- 익명 함수가 깅러지고 복잡해지면, 로직을 더 작은 단위의 명명 함수로 작성해야 한다



## 5.9 프로그래밍 언어의 새로운 기능을 적절하게 사용하라

- 프로그래밍 언어 설계자는 새로운 기능을 추가하기 전에 매우 신중하게 생각하기 때문에 새로운 기능으로 인해 코드의 가독성이 높아지거나 코드가 더 견고해지는 경우가 많이 있을 수 있다.



### 5.9.1 새 기능은 코드를 개선할 수 있다

- 무언가를 직접 만드는 대신 언어에서 제공하는 기능을 사용하면 코드가 최적화되어 효율적이고 버그가 없을 가능성이 커진다. 
- 일반적으로 코드의 품질을 개선한다면 언어가 제공하는 기능을 사용하는 것이 좋다.



### 5.9.2 불분명한 기능은 혼동을 일으킬 수 있다

- 일반적으로 코드 품질을 개선한다면 언어가 제공하는 기능을 사용하는 것이 바람직하다.
- 그러나 개선 사항이 적거나 다른 개발자가 그 기능에 익숙하지 않다면 차라리 사용하지 않는 것이 좋을 때도 있다.



### 5.9.3 작업에 가장 적합한 도구를 사용하라



## 요약

- 코드의 가독성이 떨어져서 이해하기 어려울 때 다음과 같은 문제가 발생할 수 있다.
  - 다른 개발자가 코드를 이해하느라 시간을 허비함
  - 버그를 유발하는 오해
  - 잘 작동하던 코드가 다른 개발자가 수정한 후에 작동하지 않음
- 코드의 가독성을 높이다 보면 때로는 코드가 장황하게 되고 더 많은 줄을 작성해야할 수도 있다. 이것은 종종 가치있는 절충이다.
- 코드의 가독성을 높이려면 다른 개발자의 입장을 공감하고, 그들이 코드를 읽을 때 어떻게 혼란스러워할지를 상상해보는 것이 필요하다.